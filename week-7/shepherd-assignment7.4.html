<!DOCTYPE html>
<!--
 ******************************************************************************
; Title: shepherd-assignment7.4
; Author: Jeff Shepherd
; Date: 01/21/2020
; Modified by:
; Description: create table with edit and delete functions
 ******************************************************************************
-->
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Shepherd Assignment 7.4</title>
  <link rel="stylesheet" href="../site.css">
</head>

<body>
  <div id="componentTableContainer"></div>

</body>
<script>
  const components = getData();

  document.getElementById("componentTableContainer").innerHTML =
    `<h1>Computer Components</h1>
     <table>
       <thead>
         <tr>
           <th>ID</th>
           <th>Name</th>
           <th>Amount</th>
           <th>Functions</th>
         </tr>
       </thead>
       <tbody id='tableBody'></tbody>
     </table>`;

  components.forEach(item =>
    document.getElementById("tableBody").insertAdjacentHTML("beforeend",
      `<tr>
          <td> ${item.id.toString()} </td>
          <td> ${item.name} </td>
          <td> ${formatNumber(item.amount.toFixed(2))} </td>
          <td> <a href='javascript:alert("${item.id.toString()}");'>EDIT</a>
             | <a href='javascript:confirm("Are you sure?");'>DELETE</a></td>
      </tr>`));

  /*
   * params: number as a string
   * response: string of a number formatted with commas
   * description: adds a comma after the thousands place.
   */
  function formatNumber(aNumber) {
    let reversed = aNumber.split("").reverse();
    let reversedWithCommas = reversed.slice(0, 3); //source array unchanged
    for (let i = 3; i < reversed.length; i++) {
      if (i !== 3 && i % 3 === 0) {
        reversedWithCommas.push(",");
      }
      reversedWithCommas.push(reversed[i]);
    }
    return reversedWithCommas.reverse().join("");
  }

  /*
   * params: none
   * response: objects with id, name, and amount properties
   * description: returns an array of objects.
   */
  function getData() {
    return [{
        id: 1,
        name: "Laptop",
        amount: 1500.99
      },
      {
        id: 2,
        name: "Motherboard",
        amount: 35.70
      },
      {
        id: 3,
        name: "Monitor",
        amount: 174.99
      },
      {
        id: 4,
        name: "Mouse",
        amount: 13.99
      },
      {
        id: 5,
        name: "Keyboard",
        amount: 14.50
      }
    ];
  }

</script>

</html>
